<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Investment Calculator Suite</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a202c 100%);
            color: #e2e8f0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(26, 32, 44, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .main-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #4fd1c7;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .developer-credit {
            background: #e53e3e;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 15px;
            box-shadow: 0 4px 8px rgba(229, 62, 62, 0.3);
        }

        .visitor-counter {
            background: rgba(79, 209, 199, 0.2);
            border: 1px solid #4fd1c7;
            color: #4fd1c7;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            display: inline-block;
        }

        .tabs-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .tab-button {
            background: rgba(45, 55, 72, 0.8);
            color: #cbd5e0;
            border: 1px solid #4a5568;
            padding: 12px 18px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
            min-width: 140px;
            text-align: center;
        }

        .tab-button:hover {
            background: rgba(79, 209, 199, 0.2);
            border-color: #4fd1c7;
            color: #4fd1c7;
        }

        .tab-button.active {
            background: #4fd1c7;
            color: #1a202c;
            border-color: #4fd1c7;
        }

        .tab-content {
            display: none;
            background: rgba(45, 55, 72, 0.6);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid #4a5568;
        }

        .tab-content.active {
            display: block;
        }

        .input-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            color: #a0aec0;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            background: rgba(26, 32, 44, 0.8);
            border: 2px solid #4a5568;
            color: #e2e8f0;
            padding: 12px 15px;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #4fd1c7;
            box-shadow: 0 0 0 3px rgba(79, 209, 199, 0.1);
        }

        .calculate-btn {
            background: linear-gradient(135deg, #4fd1c7 0%, #38b2ac 100%);
            color: #1a202c;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 0;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(79, 209, 199, 0.3);
        }

        .results-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .result-card {
            background: rgba(26, 32, 44, 0.8);
            border: 1px solid #4a5568;
            border-radius: 12px;
            padding: 20px;
        }

        .result-card h3 {
            color: #4fd1c7;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .result-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #68d391;
            margin-bottom: 10px;
        }

        .chart-container {
            width: 100%;
            height: 400px;
            margin: 20px 0;
            background: rgba(26, 32, 44, 0.8);
            border-radius: 12px;
            padding: 20px;
        }

        .data-table {
            width: 100%;
            background: rgba(26, 32, 44, 0.8);
            border-radius: 12px;
            overflow: hidden;
            margin: 20px 0;
        }

        .data-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th,
        .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #4a5568;
        }

        .data-table th {
            background: rgba(79, 209, 199, 0.2);
            color: #4fd1c7;
            font-weight: 600;
        }

        .data-table tr:nth-child(even) {
            background: rgba(45, 55, 72, 0.3);
        }

        .data-table tr:hover {
            background: rgba(79, 209, 199, 0.1);
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .summary-item {
            background: rgba(26, 32, 44, 0.8);
            border: 1px solid #4a5568;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .summary-item .label {
            color: #a0aec0;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .summary-item .value {
            color: #68d391;
            font-size: 1.4rem;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .tabs-container {
                flex-direction: column;
            }
            
            .tab-button {
                min-width: 100%;
            }
            
            .input-section {
                grid-template-columns: 1fr;
            }
            
            .main-title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="main-title">Ultimate Investment Calculator Suite</h1>
            <div class="developer-credit">Developed by King John (Kyaw Myo Htun)</div>
            <div class="visitor-counter">
                <i class="fas fa-eye"></i> Visitors: <span id="visitorCount">0</span>
            </div>
        </div>

        <div class="tabs-container">
            <button class="tab-button active" onclick="showTab('goal-planning')">Goal Planning</button>
            <button class="tab-button" onclick="showTab('sip-projection')">SIP Projection</button>
            <button class="tab-button" onclick="showTab('lump-sum')">Lump Sum Growth</button>
            <button class="tab-button" onclick="showTab('investment-tracker')">Investment Tracker</button>
            <button class="tab-button" onclick="showTab('retirement-planning')">Retirement Planning</button>
            <button class="tab-button" onclick="showTab('withdrawal-simulator')">Withdrawal Simulator</button>
        </div>

        <!-- Goal Planning Tab -->
        <div id="goal-planning" class="tab-content active">
            <h2 style="color: #4fd1c7; margin-bottom: 20px;"><i class="fas fa-target"></i> Goal Planning Mode</h2>
            <div class="input-section">
                <div class="input-group">
                    <label>Target Amount ($)</label>
                    <input type="number" id="goalAmount" placeholder="Enter target amount (e.g., 1000000)">
                </div>
                <div class="input-group">
                    <label>Expected Return Rate (%)</label>
                    <input type="number" id="goalReturn" placeholder="Enter expected return rate (e.g., 7)" step="0.1">
                </div>
                <div class="input-group">
                    <label>Investment Period (Years)</label>
                    <input type="number" id="goalYears" placeholder="Enter investment period (e.g., 10)">
                </div>
            </div>
            <button class="calculate-btn" onclick="calculateGoalPlanning()">
                <i class="fas fa-calculator"></i> Calculate Monthly Investment Required
            </button>
            <div id="goalResults" class="results-section"></div>
        </div>

        <!-- SIP Projection Tab -->
        <div id="sip-projection" class="tab-content">
            <h2 style="color: #4fd1c7; margin-bottom: 20px;"><i class="fas fa-chart-line"></i> SIP Projection Mode</h2>
            <div class="input-section">
                <div class="input-group">
                    <label>Monthly Investment ($)</label>
                    <input type="number" id="sipAmount" placeholder="Enter monthly investment (e.g., 500)">
                </div>
                <div class="input-group">
                    <label>Expected Return Rate (%)</label>
                    <input type="number" id="sipReturn" placeholder="Enter expected return rate (e.g., 7)" step="0.1">
                </div>
                <div class="input-group">
                    <label>Investment Period (Years)</label>
                    <input type="number" id="sipYears" placeholder="Enter investment period (e.g., 15)">
                </div>
            </div>
            <button class="calculate-btn" onclick="calculateSIPProjection()">
                <i class="fas fa-calculator"></i> Calculate Future Value
            </button>
            <div id="sipResults" class="results-section"></div>
        </div>

        <!-- Lump Sum Tab -->
        <div id="lump-sum" class="tab-content">
            <h2 style="color: #4fd1c7; margin-bottom: 20px;"><i class="fas fa-coins"></i> Lump Sum Growth Mode</h2>
            <div class="input-section">
                <div class="input-group">
                    <label>Initial Investment ($)</label>
                    <input type="number" id="lumpAmount" placeholder="Enter initial investment (e.g., 50000)">
                </div>
                <div class="input-group">
                    <label>Expected Return Rate (%)</label>
                    <input type="number" id="lumpReturn" placeholder="Enter expected return rate (e.g., 8)" step="0.1">
                </div>
                <div class="input-group">
                    <label>Investment Period (Years)</label>
                    <input type="number" id="lumpYears" placeholder="Enter investment period (e.g., 20)">
                </div>
            </div>
            <button class="calculate-btn" onclick="calculateLumpSum()">
                <i class="fas fa-calculator"></i> Calculate Growth Value
            </button>
            <div id="lumpResults" class="results-section"></div>
        </div>

        <!-- Investment Tracker Tab -->
        <div id="investment-tracker" class="tab-content">
            <h2 style="color: #4fd1c7; margin-bottom: 20px;"><i class="fas fa-chart-area"></i> Investment Tracker Mode</h2>
            <div class="input-section">
                <div class="input-group">
                    <label>Starting Balance ($)</label>
                    <input type="number" id="trackerStart" placeholder="Enter starting balance (e.g., 10000)">
                </div>
                <div class="input-group">
                    <label>Monthly Investment ($)</label>
                    <input type="number" id="trackerMonthly" placeholder="Enter monthly investment (e.g., 500)">
                </div>
                <div class="input-group">
                    <label>Expected Return Rate (%)</label>
                    <input type="number" id="trackerReturn" placeholder="Enter expected return rate (e.g., 8)" step="0.1">
                </div>
                <div class="input-group">
                    <label>Investment Period (Years)</label>
                    <input type="number" id="trackerYears" placeholder="Enter investment period (e.g., 15)">
                </div>
            </div>
            <button class="calculate-btn" onclick="calculateInvestmentTracker()">
                <i class="fas fa-calculator"></i> Generate Yearly Analysis
            </button>
            <div id="trackerResults" class="results-section"></div>
        </div>

        <!-- Retirement Planning Tab -->
        <div id="retirement-planning" class="tab-content">
            <h2 style="color: #4fd1c7; margin-bottom: 20px;"><i class="fas fa-piggy-bank"></i> Retirement Planning Mode</h2>
            <div class="input-section">
                <div class="input-group">
                    <label>Monthly Expenses ($)</label>
                    <input type="number" id="retireMonthlyExpense" placeholder="Enter monthly expenses (e.g., 5000)">
                </div>
                <div class="input-group">
                    <label>Annual Expenses ($)</label>
                    <input type="number" id="retireAnnualExpense" placeholder="Auto-calculated from monthly" readonly>
                </div>
                <div class="input-group">
                    <label>Withdrawal Percentage (%)</label>
                    <input type="number" id="retireWithdrawal" placeholder="Enter withdrawal percentage (e.g., 4)" step="0.1">
                </div>
            </div>
            <button class="calculate-btn" onclick="calculateRetirementPlanning()">
                <i class="fas fa-calculator"></i> Calculate Required Portfolio Value
            </button>
            <div id="retireResults" class="results-section"></div>
        </div>

        <!-- Withdrawal Simulator Tab -->
        <div id="withdrawal-simulator" class="tab-content">
            <h2 style="color: #4fd1c7; margin-bottom: 20px;"><i class="fas fa-chart-bar"></i> Withdrawal Simulator Mode</h2>
            <div class="input-section">
                <div class="input-group">
                    <label>Portfolio Value ($)</label>
                    <input type="number" id="simPortfolio" placeholder="Enter portfolio value (e.g., 1500000)">
                </div>
                <div class="input-group">
                    <label>Withdrawal Percentage (%)</label>
                    <input type="number" id="simWithdrawal" placeholder="Enter withdrawal percentage (e.g., 4)" step="0.1">
                </div>
                <div class="input-group">
                    <label>Portfolio Return Rate (%)</label>
                    <input type="number" id="simReturn" placeholder="Enter average return rate (e.g., 6)" step="0.1">
                </div>
                <div class="input-group">
                    <label>Years of Retirement</label>
                    <input type="number" id="simYears" placeholder="Enter retirement years (e.g., 25)">
                </div>
            </div>
            <button class="calculate-btn" onclick="calculateWithdrawalSimulator()">
                <i class="fas fa-calculator"></i> Run Withdrawal Simulation
            </button>
            <div id="simResults" class="results-section"></div>
        </div>
    </div>

    <script>
        // Visitor Counter
        function updateVisitorCount() {
            let count = localStorage.getItem('visitorCount');
            if (!count) {
                count = 0;
            }
            count = parseInt(count) + 1;
            localStorage.setItem('visitorCount', count);
            document.getElementById('visitorCount').textContent = count;
        }

        // Tab Management
        function showTab(tabId) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabId).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Utility Functions
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        // Goal Planning Calculation
        function calculateGoalPlanning() {
            const targetAmount = parseFloat(document.getElementById('goalAmount').value);
            const returnRate = parseFloat(document.getElementById('goalReturn').value) / 100;
            const years = parseFloat(document.getElementById('goalYears').value);

            if (!targetAmount || !returnRate || !years) {
                alert('Please fill all fields');
                return;
            }

            const monthlyRate = returnRate / 12;
            const totalMonths = years * 12;
            const monthlyInvestment = targetAmount * monthlyRate / (Math.pow(1 + monthlyRate, totalMonths) - 1);
            const totalInvestment = monthlyInvestment * totalMonths;
            const totalReturns = targetAmount - totalInvestment;

            const resultsHtml = `
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="label">Required Monthly Investment</div>
                        <div class="value">${formatCurrency(monthlyInvestment)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Total Investment</div>
                        <div class="value">${formatCurrency(totalInvestment)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Estimated Returns</div>
                        <div class="value">${formatCurrency(totalReturns)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Target Amount</div>
                        <div class="value">${formatCurrency(targetAmount)}</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="goalChart" style="height: 300px;"></canvas>
                </div>
            `;

            document.getElementById('goalResults').innerHTML = resultsHtml;

            // Create pie chart
            const ctx = document.getElementById('goalChart').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Total Investment', 'Expected Returns'],
                    datasets: [{
                        data: [totalInvestment, totalReturns],
                        backgroundColor: ['#4fd1c7', '#68d391'],
                        borderColor: ['#38b2ac', '#48bb78'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e2e8f0'
                            }
                        }
                    }
                }
            });
        }

        // SIP Projection Calculation
        function calculateSIPProjection() {
            const monthlyInvestment = parseFloat(document.getElementById('sipAmount').value);
            const returnRate = parseFloat(document.getElementById('sipReturn').value) / 100;
            const years = parseFloat(document.getElementById('sipYears').value);

            if (!monthlyInvestment || !returnRate || !years) {
                alert('Please fill all fields');
                return;
            }

            const monthlyRate = returnRate / 12;
            const totalMonths = years * 12;
            const futureValue = monthlyInvestment * (Math.pow(1 + monthlyRate, totalMonths) - 1) / monthlyRate;
            const totalInvestment = monthlyInvestment * totalMonths;
            const totalReturns = futureValue - totalInvestment;

            const resultsHtml = `
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="label">Future Value</div>
                        <div class="value">${formatCurrency(futureValue)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Total Investment</div>
                        <div class="value">${formatCurrency(totalInvestment)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Total Returns</div>
                        <div class="value">${formatCurrency(totalReturns)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Monthly Investment</div>
                        <div class="value">${formatCurrency(monthlyInvestment)}</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="sipChart" style="height: 300px;"></canvas>
                </div>
            `;

            document.getElementById('sipResults').innerHTML = resultsHtml;

            // Create pie chart
            const ctx = document.getElementById('sipChart').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Total Investment', 'Expected Returns'],
                    datasets: [{
                        data: [totalInvestment, totalReturns],
                        backgroundColor: ['#4fd1c7', '#68d391'],
                        borderColor: ['#38b2ac', '#48bb78'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e2e8f0'
                            }
                        }
                    }
                }
            });
        }

        // Lump Sum Calculation
        function calculateLumpSum() {
            const initialAmount = parseFloat(document.getElementById('lumpAmount').value);
            const returnRate = parseFloat(document.getElementById('lumpReturn').value) / 100;
            const years = parseFloat(document.getElementById('lumpYears').value);

            if (!initialAmount || !returnRate || !years) {
                alert('Please fill all fields');
                return;
            }

            const futureValue = initialAmount * Math.pow(1 + returnRate, years);
            const totalReturns = futureValue - initialAmount;

            const resultsHtml = `
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="label">Final Value</div>
                        <div class="value">${formatCurrency(futureValue)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Initial Investment</div>
                        <div class="value">${formatCurrency(initialAmount)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Total Returns</div>
                        <div class="value">${formatCurrency(totalReturns)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Growth Multiple</div>
                        <div class="value">${(futureValue / initialAmount).toFixed(2)}x</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="lumpChart" style="height: 300px;"></canvas>
                </div>
            `;

            document.getElementById('lumpResults').innerHTML = resultsHtml;

            // Create pie chart
            const ctx = document.getElementById('lumpChart').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Initial Investment', 'Compound Returns'],
                    datasets: [{
                        data: [initialAmount, totalReturns],
                        backgroundColor: ['#4fd1c7', '#68d391'],
                        borderColor: ['#38b2ac', '#48bb78'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e2e8f0'
                            }
                        }
                    }
                }
            });
        }

        // Investment Tracker Calculation
        function calculateInvestmentTracker() {
            const startingBalance = parseFloat(document.getElementById('trackerStart').value);
            const monthlyInvestment = parseFloat(document.getElementById('trackerMonthly').value);
            const returnRate = parseFloat(document.getElementById('trackerReturn').value) / 100;
            const years = parseFloat(document.getElementById('trackerYears').value);

            if (!startingBalance || !monthlyInvestment || !returnRate || !years) {
                alert('Please fill all fields');
                return;
            }

            let yearlyData = [];
            let balance = startingBalance;
            let totalContributions = startingBalance;

            for (let year = 1; year <= years; year++) {
                let yearStartBalance = balance;
                let yearContributions = monthlyInvestment * 12;
                
                // Add monthly contributions and calculate returns
                for (let month = 1; month <= 12; month++) {
                    balance += monthlyInvestment;
                    balance *= (1 + returnRate / 12);
                }
                
                totalContributions += yearContributions;
                let interest = balance - yearStartBalance - yearContributions;
                
                yearlyData.push({
                    year: year,
                    startBalance: yearStartBalance,
                    contributions: yearContributions,
                    interest: interest,
                    endBalance: balance
                });
            }

            const totalProfit = balance - totalContributions;

            let tableHtml = `
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="label">Final Balance</div>
                        <div class="value">${formatCurrency(balance)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Total Contributions</div>
                        <div class="value">${formatCurrency(totalContributions)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Total Profit</div>
                        <div class="value">${formatCurrency(totalProfit)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Return Multiple</div>
                        <div class="value">${(balance / totalContributions).toFixed(2)}x</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="trackerChart" style="height: 300px;"></canvas>
                </div>
                <div class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>Starting Balance</th>
                                <th>Annual Contributions</th>
                                <th>Interest Earned</th>
                                <th>Ending Balance</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            yearlyData.forEach(data => {
                tableHtml += `
                    <tr>
                        <td>${data.year}</td>
                        <td>${formatCurrency(data.startBalance)}</td>
                        <td>${formatCurrency(data.contributions)}</td>
                        <td>${formatCurrency(data.interest)}</td>
                        <td>${formatCurrency(data.endBalance)}</td>
                    </tr>
                `;
            });

            tableHtml += `
                        </tbody>
                    </table>
                </div>
            `;

            document.getElementById('trackerResults').innerHTML = tableHtml;

            // Create pie chart
            const ctx = document.getElementById('trackerChart').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Total Contributions', 'Total Profit'],
                    datasets: [{
                        data: [totalContributions, totalProfit],
                        backgroundColor: ['#4fd1c7', '#68d391'],
                        borderColor: ['#38b2ac', '#48bb78'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e2e8f0'
                            }
                        }
                    }
                }
            });
        }

        // Retirement Planning Calculation
        function calculateRetirementPlanning() {
            const monthlyExpenses = parseFloat(document.getElementById('retireMonthlyExpense').value);
            const withdrawalRate = parseFloat(document.getElementById('retireWithdrawal').value) / 100;

            if (!monthlyExpenses || !withdrawalRate) {
                alert('Please fill all fields');
                return;
            }

            const annualExpenses = monthlyExpenses * 12;
            document.getElementById('retireAnnualExpense').value = annualExpenses;

            const requiredPortfolio = annualExpenses / withdrawalRate;

            const resultsHtml = `
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="label">Required Portfolio Value</div>
                        <div class="value">${formatCurrency(requiredPortfolio)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Annual Expenses</div>
                        <div class="value">${formatCurrency(annualExpenses)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Monthly Expenses</div>
                        <div class="value">${formatCurrency(monthlyExpenses)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Withdrawal Rate</div>
                        <div class="value">${(withdrawalRate * 100).toFixed(1)}%</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="retireChart" style="height: 300px;"></canvas>
                </div>
            `;

            document.getElementById('retireResults').innerHTML = resultsHtml;

            // Create pie chart showing expense breakdown
            const ctx = document.getElementById('retireChart').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Annual Expenses', 'Remaining Portfolio Growth'],
                    datasets: [{
                        data: [annualExpenses, requiredPortfolio - annualExpenses],
                        backgroundColor: ['#e53e3e', '#4fd1c7'],
                        borderColor: ['#c53030', '#38b2ac'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e2e8f0'
                            }
                        }
                    }
                }
            });
        }

        // Withdrawal Simulator Calculation
        function calculateWithdrawalSimulator() {
            const portfolioValue = parseFloat(document.getElementById('simPortfolio').value);
            const withdrawalRate = parseFloat(document.getElementById('simWithdrawal').value) / 100;
            const returnRate = parseFloat(document.getElementById('simReturn').value) / 100;
            const years = parseFloat(document.getElementById('simYears').value);

            if (!portfolioValue || !withdrawalRate || !returnRate || !years) {
                alert('Please fill all fields');
                return;
            }

            let yearlyData = [];
            let balance = portfolioValue;
            const annualWithdrawal = portfolioValue * withdrawalRate;

            for (let year = 1; year <= years; year++) {
                let startBalance = balance;
                let withdrawal = annualWithdrawal;
                let returns = balance * returnRate;
                balance = balance + returns - withdrawal;

                yearlyData.push({
                    year: year,
                    startBalance: startBalance,
                    withdrawal: withdrawal,
                    returns: returns,
                    endBalance: Math.max(0, balance)
                });

                if (balance <= 0) break;
            }

            const finalBalance = balance;
            const totalWithdrawals = yearlyData.length * annualWithdrawal;

            let tableHtml = `
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="label">Final Portfolio Value</div>
                        <div class="value">${formatCurrency(finalBalance)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Annual Withdrawal</div>
                        <div class="value">${formatCurrency(annualWithdrawal)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Total Withdrawals</div>
                        <div class="value">${formatCurrency(totalWithdrawals)}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">Portfolio Status</div>
                        <div class="value" style="color: ${finalBalance > 0 ? '#68d391' : '#f56565'}">${finalBalance > 0 ? 'Sustainable' : 'Depleted'}</div>
                    </div>
                </div>
                <div class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>Starting Balance</th>
                                <th>Withdrawal Amount</th>
                                <th>Return Earned</th>
                                <th>Ending Balance</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            yearlyData.forEach(data => {
                tableHtml += `
                    <tr>
                        <td>${data.year}</td>
                        <td>${formatCurrency(data.startBalance)}</td>
                        <td>${formatCurrency(data.withdrawal)}</td>
                        <td>${formatCurrency(data.returns)}</td>
                        <td>${formatCurrency(data.endBalance)}</td>
                    </tr>
                `;
            });

            tableHtml += `
                        </tbody>
                    </table>
                </div>
                <div class="chart-container">
                    <canvas id="simChart" style="height: 300px;"></canvas>
                </div>
            `;

            document.getElementById('simResults').innerHTML = tableHtml;

            // Create line chart
            const ctx = document.getElementById('simChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: yearlyData.map(d => `Year ${d.year}`),
                    datasets: [{
                        label: 'Portfolio Value',
                        data: yearlyData.map(d => d.endBalance),
                        borderColor: '#4fd1c7',
                        backgroundColor: 'rgba(79, 209, 199, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Years',
                                color: '#e2e8f0'
                            },
                            ticks: {
                                color: '#a0aec0'
                            },
                            grid: {
                                color: 'rgba(160, 174, 192, 0.2)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Portfolio Value ($)',
                                color: '#e2e8f0'
                            },
                            ticks: {
                                color: '#a0aec0',
                                callback: function(value) {
                                    return formatCurrency(value);
                                }
                            },
                            grid: {
                                color: 'rgba(160, 174, 192, 0.2)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e2e8f0'
                            }
                        }
                    }
                }
            });
        }

        // Auto-calculate annual expenses in retirement planning
        document.getElementById('retireMonthlyExpense').addEventListener('input', function() {
            const monthlyExpenses = parseFloat(this.value);
            if (monthlyExpenses) {
                document.getElementById('retireAnnualExpense').value = monthlyExpenses * 12;
            }
        });

        // Initialize visitor counter on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateVisitorCount();
        });
    </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"97b69d32ffc8cdd6","serverTiming":{"name":{"cfExtPri":true,"cfEdge":true,"cfOrigin":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"version":"2025.8.0","token":"4edd5f8ec12a48cfa682ab8261b80a79"}' crossorigin="anonymous"></script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDmXpx3eDLGk%2BdRt6%2FlynMCxKfXQRyY2A65pU%2F%2Bs0SlZ%2F3%2BTVvRbbu42leoEKHUbdoqPoFQX0j11mCl7Kv4jRgBDekk9p8NinbVuEr2ulcJcl7OEf6UOULN1tkR4xHcbbBR25ezFHJeyPcYqwCOjifFf9KJxZ5uboq1Xy5aC8ZnLbcF9Sumjynpqo8kWrvXAWlpeP7Zly43v0lyl2mjwGewA9xW1DoVFEeH4kPzrg83wWjdIw%2FSSuHOjeZE04MEhkbRnRN1qIVHAupjvoRUGBQHCbnBNyoOmhfJ2mPUvCgeuKVNGpHazphO70wMNgF2xq0mhiRHkxiaEbj7SSiSqNf1IWO2HCCkrgbSqRS1E%2F4W00sMIh7yBaxIenLANC7yvAEXUP6cy9Nkhp6PEIfjvcBT7TJsRutURsetwEe6jIeuMmHD0u1%2FuXGAalTzJrg2RQJpFAQw7QSi4B%2BsYrxyAPRzKuTQSxU%2FNCfC0V38miKw18cATjBHogpzUY%2FX0P1ThaDhClDNoa4MHDa8VstaG3IKpS6x4g0sawPRCJMcsrkwYH";
        window.__genspark_locale = "en-US";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDmXpx3eDLGk+dRt6/lynMCxKfXQRyY2A65pU/+s0SlZ/3+TVvRbbu42leoEKHUbdoqPoFQX0j11mCl7Kv4jRgBDekk9p8NinbVuEr2ulcJcl7OEf6UOULN1tkR4xHcbbBR25ezFHJeyPcYqwCOjifFf9KJxZ5uboq1Xy5aC8ZnLbcF9Sumjynpqo8kWrvXAWlpeP7Zly43v0lyl2mjwGewA9xW1DoVFEeH4kPzrg83wWjdIw/SSuHOjeZE04MEhkbRnRN1qIVHAupjvoRUGBQHCbnBNyoOmhfJ2mPUvCgeuKVNGpHazphO70wMNgF2xq0mhiRHkxiaEbj7SSiSqNf1IWO2HCCkrgbSqRS1E/4W00sMIh7yBaxIenLANC7yvAEXUP6cy9Nkhp6PEIfjvcBT7TJsRutURsetwEe6jIeuMmHD0u1/uXGAalTzJrg2RQJpFAQw7QSi4B+sYrxyAPRzKuTQSxU/NCfC0V38miKw18cATjBHogpzUY/X0P1ThaDhClDNoa4MHDa8VstaG3IKpS6x4g0sawPRCJMcsrkwYH";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    