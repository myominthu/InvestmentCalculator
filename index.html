<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Investment Calculator Suite</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a202c 100%);
            color: #e2e8f0;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .main-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .developer-credit {
            background: #dc2626;
            color: #ffffff;
            padding: 8px 16px;
            border-radius: 6px;
            display: inline-block;
            font-size: 0.9rem;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .visitor-counter {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #94a3b8;
        }

        .tabs {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
            margin-bottom: 30px;
            background: rgba(15, 20, 25, 0.8);
            padding: 10px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .tab {
            background: linear-gradient(145deg, #2d3748, #4a5568);
            color: #cbd5e0;
            border: none;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
            font-weight: 500;
            min-width: 140px;
            text-align: center;
        }

        .tab:hover {
            background: linear-gradient(145deg, #4299e1, #3182ce);
            color: #ffffff;
            transform: translateY(-2px);
        }

        .tab.active {
            background: linear-gradient(145deg, #3182ce, #2b77cb);
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.4);
        }

        .tab-content {
            display: none;
            background: linear-gradient(145deg, #1a202c, #2d3748);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .tab-content.active {
            display: block;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #e2e8f0;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(45, 55, 72, 0.8);
            border: 2px solid #4a5568;
            border-radius: 8px;
            color: #e2e8f0;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }

        .input-group input::placeholder {
            color: #718096;
        }

        .calculate-btn {
            background: linear-gradient(145deg, #4299e1, #3182ce);
            color: #ffffff;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin: 20px 0;
        }

        .calculate-btn:hover {
            background: linear-gradient(145deg, #3182ce, #2c5aa0);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(49, 130, 206, 0.3);
        }

        .results {
            background: linear-gradient(145deg, #2d3748, #4a5568);
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            font-weight: 500;
            color: #cbd5e0;
        }

        .result-value {
            font-weight: bold;
            font-size: 1.1rem;
            color: #4ade80;
        }

        .chart-container {
            margin: 30px 0;
            background: rgba(45, 55, 72, 0.5);
            padding: 20px;
            border-radius: 12px;
            height: 400px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: rgba(45, 55, 72, 0.5);
            border-radius: 8px;
            overflow: hidden;
        }

        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .data-table th {
            background: rgba(49, 130, 206, 0.2);
            font-weight: 600;
            color: #e2e8f0;
        }

        .data-table tr:nth-child(even) {
            background: rgba(255,255,255,0.05);
        }

        .data-table td {
            color: #cbd5e0;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }

        .withdrawal-layout {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .withdrawal-results {
            background: linear-gradient(145deg, #2d3748, #4a5568);
            padding: 20px;
            border-radius: 12px;
        }

        .withdrawal-graph {
            width: 100%;
            height: 400px;
            background: rgba(45, 55, 72, 0.5);
            padding: 20px;
            border-radius: 12px;
        }

        .error-message {
            color: #f56565;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                min-width: auto;
                width: 100%;
            }
            
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .main-title {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="main-title">Ultimate Investment Calculator Suite</h1>
            <div class="developer-credit">Developed by King John (Kyaw Myo Htun)</div>
            <div class="visitor-counter">Visitors: <span id="visitorCount">0</span></div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('goal-planning')">Goal Planning</button>
            <button class="tab" onclick="showTab('sip-projection')">SIP Projection</button>
            <button class="tab" onclick="showTab('lump-sum')">Lump Sum Growth</button>
            <button class="tab" onclick="showTab('investment-tracker')">Investment Tracker</button>
            <button class="tab" onclick="showTab('retirement-planning')">Retirement Planning</button>
            <button class="tab" onclick="showTab('withdrawal-simulator')">Withdrawal Simulator</button>
        </div>

        <!-- Goal Planning Tab -->
        <div id="goal-planning" class="tab-content active">
            <h2>Goal Planning Mode</h2>
            <div class="grid-2">
                <div>
                    <div class="input-group">
                        <label for="goalAmount">Target Amount ($)</label>
                        <input type="number" id="goalAmount" placeholder="Enter target amount (e.g., 1000000)">
                    </div>
                    <div class="input-group">
                        <label for="goalReturnRate">Expected Return Rate (%)</label>
                        <input type="number" id="goalReturnRate" step="0.1" placeholder="Enter expected return rate (e.g., 7)">
                    </div>
                    <div class="input-group">
                        <label for="goalYears">Investment Period (Years)</label>
                        <input type="number" id="goalYears" placeholder="Enter investment period (e.g., 10)">
                    </div>
                    <button class="calculate-btn" onclick="calculateGoal()">Calculate Monthly Investment</button>
                </div>
                <div>
                    <div id="goalResults" class="results" style="display: none;">
                        <div class="result-item">
                            <span class="result-label">Required Monthly Investment:</span>
                            <span class="result-value" id="goalMonthlyInvestment">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Total Investment:</span>
                            <span class="result-value" id="goalTotalInvestment">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Total Returns:</span>
                            <span class="result-value" id="goalTotalReturns">$0</span>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="goalChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- SIP Projection Tab -->
        <div id="sip-projection" class="tab-content">
            <h2>SIP Projection Mode</h2>
            <div class="grid-2">
                <div>
                    <div class="input-group">
                        <label for="sipAmount">Monthly Investment ($)</label>
                        <input type="number" id="sipAmount" placeholder="Enter monthly investment (e.g., 500)">
                    </div>
                    <div class="input-group">
                        <label for="sipReturnRate">Expected Return Rate (%)</label>
                        <input type="number" id="sipReturnRate" step="0.1" placeholder="Enter expected return rate (e.g., 7)">
                    </div>
                    <div class="input-group">
                        <label for="sipYears">Investment Period (Years)</label>
                        <input type="number" id="sipYears" placeholder="Enter investment period (e.g., 15)">
                    </div>
                    <button class="calculate-btn" onclick="calculateSIP()">Calculate Future Value</button>
                </div>
                <div>
                    <div id="sipResults" class="results" style="display: none;">
                        <div class="result-item">
                            <span class="result-label">Total Investment:</span>
                            <span class="result-value" id="sipTotalInvestment">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Total Returns:</span>
                            <span class="result-value" id="sipTotalReturns">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Final Value:</span>
                            <span class="result-value" id="sipFinalValue">$0</span>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="sipChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lump Sum Growth Tab -->
        <div id="lump-sum" class="tab-content">
            <h2>Lump Sum Growth Mode</h2>
            <div class="grid-2">
                <div>
                    <div class="input-group">
                        <label for="lumpSumAmount">Initial Investment ($)</label>
                        <input type="number" id="lumpSumAmount" placeholder="Enter initial investment (e.g., 50000)">
                    </div>
                    <div class="input-group">
                        <label for="lumpSumReturnRate">Expected Return Rate (%)</label>
                        <input type="number" id="lumpSumReturnRate" step="0.1" placeholder="Enter expected return rate (e.g., 8)">
                    </div>
                    <div class="input-group">
                        <label for="lumpSumYears">Investment Period (Years)</label>
                        <input type="number" id="lumpSumYears" placeholder="Enter investment period (e.g., 10)">
                    </div>
                    <button class="calculate-btn" onclick="calculateLumpSum()">Calculate Growth</button>
                </div>
                <div>
                    <div id="lumpSumResults" class="results" style="display: none;">
                        <div class="result-item">
                            <span class="result-label">Principal Investment:</span>
                            <span class="result-value" id="lumpSumPrincipal">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Total Returns:</span>
                            <span class="result-value" id="lumpSumReturns">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Final Value:</span>
                            <span class="result-value" id="lumpSumFinalValue">$0</span>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="lumpSumChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Investment Tracker Tab -->
        <div id="investment-tracker" class="tab-content">
            <h2>Investment Tracker Mode</h2>
            <div class="grid-2">
                <div>
                    <div class="input-group">
                        <label for="trackerStartingBalance">Starting Balance ($)</label>
                        <input type="number" id="trackerStartingBalance" placeholder="Enter starting balance (e.g., 10000)">
                    </div>
                    <div class="input-group">
                        <label for="trackerMonthlyInvestment">Monthly Investment ($)</label>
                        <input type="number" id="trackerMonthlyInvestment" placeholder="Enter monthly investment (e.g., 500)">
                    </div>
                    <div class="input-group">
                        <label for="trackerReturnRate">Expected Return Rate (%)</label>
                        <input type="number" id="trackerReturnRate" step="0.1" placeholder="Enter expected return rate (e.g., 8)">
                    </div>
                    <div class="input-group">
                        <label for="trackerYears">Investment Period (Years)</label>
                        <input type="number" id="trackerYears" placeholder="Enter investment period (e.g., 20)">
                    </div>
                    <button class="calculate-btn" onclick="calculateTracker()">Generate Tracker</button>
                </div>
                <div>
                    <div id="trackerResults" class="results" style="display: none;">
                        <div class="result-item">
                            <span class="result-label">Total Balance:</span>
                            <span class="result-value" id="trackerTotalBalance">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Total Contributions:</span>
                            <span class="result-value" id="trackerTotalContributions">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Total Profit:</span>
                            <span class="result-value" id="trackerTotalProfit">$0</span>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="trackerChart"></canvas>
                    </div>
                </div>
            </div>
            <div id="trackerTable" style="display: none;">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Interest Earned</th>
                            <th>Ending Balance</th>
                        </tr>
                    </thead>
                    <tbody id="trackerTableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Retirement Planning Tab -->
        <div id="retirement-planning" class="tab-content">
            <h2>Retirement Planning Mode</h2>
            <div class="grid-2">
                <div>
                    <div class="input-group">
                        <label for="monthlyExpenses">Monthly Expenses ($)</label>
                        <input type="number" id="monthlyExpenses" placeholder="Enter monthly expenses (e.g., 5000)" oninput="calculateAnnualExpenses()">
                    </div>
                    <div class="input-group">
                        <label for="annualExpenses">Annual Expenses ($)</label>
                        <input type="number" id="annualExpenses" placeholder="Auto-calculated from monthly expenses" readonly>
                    </div>
                    <div class="input-group">
                        <label for="withdrawalPercentage">Withdrawal Percentage (%)</label>
                        <input type="number" id="withdrawalPercentage" step="0.1" placeholder="Enter withdrawal percentage (e.g., 4)">
                    </div>
                    <button class="calculate-btn" onclick="calculateRetirement()">Calculate Portfolio Value</button>
                </div>
                <div>
                    <div id="retirementResults" class="results" style="display: none;">
                        <div class="result-item">
                            <span class="result-label">Required Retirement Portfolio Value:</span>
                            <span class="result-value" id="retirementPortfolioValue">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Monthly Expenses:</span>
                            <span class="result-value" id="retirementMonthlyExpenses">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Annual Expenses:</span>
                            <span class="result-value" id="retirementAnnualExpenses">$0</span>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="retirementChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Withdrawal Simulator Tab -->
        <div id="withdrawal-simulator" class="tab-content">
            <h2>Withdrawal Simulator Mode</h2>
            <div class="withdrawal-layout">
                <div class="grid-2">
                    <div>
                        <div class="input-group">
                            <label for="portfolioValue">Portfolio Value ($)</label>
                            <input type="number" id="portfolioValue" placeholder="Enter portfolio value (e.g., 1500000)">
                        </div>
                        <div class="input-group">
                            <label for="withdrawalRate">Withdrawal Percentage (%)</label>
                            <input type="number" id="withdrawalRate" step="0.1" placeholder="Enter withdrawal percentage (e.g., 4)">
                        </div>
                    </div>
                    <div>
                        <div class="input-group">
                            <label for="portfolioReturnRate">Portfolio Average Return Rate (%)</label>
                            <input type="number" id="portfolioReturnRate" step="0.1" placeholder="Enter average return rate (e.g., 6)">
                        </div>
                        <div class="input-group">
                            <label for="retirementYears">Years of Retirement</label>
                            <input type="number" id="retirementYears" placeholder="Enter years of retirement (e.g., 25)">
                        </div>
                    </div>
                </div>
                <button class="calculate-btn" onclick="calculateWithdrawal()">Run Withdrawal Simulation</button>
                
                <div id="withdrawalResults" class="withdrawal-results" style="display: none;">
                    <div class="result-item">
                        <span class="result-label">Final Portfolio Value:</span>
                        <span class="result-value" id="finalPortfolioValue">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Annual Withdrawal Amount:</span>
                        <span class="result-value" id="annualWithdrawalAmount">$0</span>
                    </div>
                </div>

                <div id="withdrawalTable" style="display: none;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>Starting Balance</th>
                                <th>Withdrawal Amount</th>
                                <th>Return Earned</th>
                                <th>Ending Balance</th>
                            </tr>
                        </thead>
                        <tbody id="withdrawalTableBody">
                        </tbody>
                    </table>
                </div>

                <div class="withdrawal-graph" style="display: none;" id="withdrawalGraphContainer">
                    <canvas id="withdrawalChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Visitor Counter
        function updateVisitorCount() {
            let count = localStorage.getItem('visitorCount') || 0;
            count = parseInt(count) + 1;
            localStorage.setItem('visitorCount', count);
            document.getElementById('visitorCount').textContent = count;
        }

        // Tab Functionality
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            tabContents.forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // Goal Planning Calculations
        function calculateGoal() {
            const amount = parseFloat(document.getElementById('goalAmount').value);
            const rate = parseFloat(document.getElementById('goalReturnRate').value) / 100 / 12;
            const years = parseFloat(document.getElementById('goalYears').value);
            const months = years * 12;

            if (!amount || !rate || !years) return;

            const monthlyPayment = (amount * rate) / (Math.pow(1 + rate, months) - 1);
            const totalInvestment = monthlyPayment * months;
            const totalReturns = amount - totalInvestment;

            document.getElementById('goalMonthlyInvestment').textContent = '$' + monthlyPayment.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('goalTotalInvestment').textContent = '$' + totalInvestment.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('goalTotalReturns').textContent = '$' + totalReturns.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('goalResults').style.display = 'block';

            // Create pie chart
            const ctx = document.getElementById('goalChart').getContext('2d');
            if (window.goalChartInstance) {
                window.goalChartInstance.destroy();
            }
            window.goalChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Total Investment', 'Total Returns'],
                    datasets: [{
                        data: [totalInvestment, totalReturns],
                        backgroundColor: ['#dc2626', '#10b981']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e2e8f0'
                            }
                        }
                    }
                }
            });
        }

        // SIP Projection Calculations
        function calculateSIP() {
            const monthlyAmount = parseFloat(document.getElementById('sipAmount').value);
            const rate = parseFloat(document.getElementById('sipReturnRate').value) / 100 / 12;
            const years = parseFloat(document.getElementById('sipYears').value);
            const months = years * 12;

            if (!monthlyAmount || !rate || !years) return;

            const futureValue = monthlyAmount * (Math.pow(1 + rate, months) - 1) / rate;
            const totalInvestment = monthlyAmount * months;
            const totalReturns = futureValue - totalInvestment;

            document.getElementById('sipTotalInvestment').textContent = '$' + totalInvestment.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('sipTotalReturns').textContent = '$' + totalReturns.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('sipFinalValue').textContent = '$' + futureValue.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('sipResults').style.display = 'block';

            // Create pie chart
            const ctx = document.getElementById('sipChart').getContext('2d');
            if (window.sipChartInstance) {
                window.sipChartInstance.destroy();
            }
            window.sipChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Total Investment', 'Total Returns'],
                    datasets: [{
                        data: [totalInvestment, totalReturns],
                        backgroundColor: ['#dc2626', '#10b981']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e2e8f0'
                            }
                        }
                    }
                }
            });
        }

        // Lump Sum Calculations
        function calculateLumpSum() {
            const principal = parseFloat(document.getElementById('lumpSumAmount').value);
            const rate = parseFloat(document.getElementById('lumpSumReturnRate').value) / 100;
            const years = parseFloat(document.getElementById('lumpSumYears').value);

            if (!principal || !rate || !years) return;

            const finalValue = principal * Math.pow(1 + rate, years);
            const totalReturns = finalValue - principal;

            document.getElementById('lumpSumPrincipal').textContent = '$' + principal.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('lumpSumReturns').textContent = '$' + totalReturns.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('lumpSumFinalValue').textContent = '$' + finalValue.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('lumpSumResults').style.display = 'block';

            // Create pie chart
            const ctx = document.getElementById('lumpSumChart').getContext('2d');
            if (window.lumpSumChartInstance) {
                window.lumpSumChartInstance.destroy();
            }
            window.lumpSumChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Principal Investment', 'Total Returns'],
                    datasets: [{
                        data: [principal, totalReturns],
                        backgroundColor: ['#dc2626', '#10b981']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e2e8f0'
                            }
                        }
                    }
                }
            });
        }

        // Investment Tracker Calculations
        function calculateTracker() {
            const startingBalance = parseFloat(document.getElementById('trackerStartingBalance').value);
            const monthlyInvestment = parseFloat(document.getElementById('trackerMonthlyInvestment').value);
            const rate = parseFloat(document.getElementById('trackerReturnRate').value) / 100;
            const years = parseFloat(document.getElementById('trackerYears').value);

            if (!startingBalance || !monthlyInvestment || !rate || !years) return;

            let balance = startingBalance;
            const yearlyData = [];
            let totalContributions = startingBalance + (monthlyInvestment * 12 * years);

            for (let year = 1; year <= years; year++) {
                const startBalance = balance;
                balance += monthlyInvestment * 12;
                const interest = balance * rate;
                balance += interest;
                
                yearlyData.push({
                    year: year,
                    interest: interest,
                    endBalance: balance
                });
            }

            const totalProfit = balance - totalContributions;

            document.getElementById('trackerTotalBalance').textContent = '$' + balance.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('trackerTotalContributions').textContent = '$' + totalContributions.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('trackerTotalProfit').textContent = '$' + totalProfit.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('trackerResults').style.display = 'block';

            // Create pie chart
            const ctx = document.getElementById('trackerChart').getContext('2d');
            if (window.trackerChartInstance) {
                window.trackerChartInstance.destroy();
            }
            window.trackerChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Total Contributions', 'Total Profit'],
                    datasets: [{
                        data: [totalContributions, totalProfit],
                        backgroundColor: ['#dc2626', '#10b981']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e2e8f0'
                            }
                        }
                    }
                }
            });

            // Create table
            const tableBody = document.getElementById('trackerTableBody');
            tableBody.innerHTML = '';
            yearlyData.forEach(data => {
                const row = tableBody.insertRow();
                row.insertCell(0).textContent = data.year;
                row.insertCell(1).textContent = '$' + data.interest.toLocaleString(undefined, {maximumFractionDigits: 2});
                row.insertCell(2).textContent = '$' + data.endBalance.toLocaleString(undefined, {maximumFractionDigits: 2});
            });
            document.getElementById('trackerTable').style.display = 'block';
        }

        // Retirement Planning Calculations
        function calculateAnnualExpenses() {
            const monthlyExpenses = parseFloat(document.getElementById('monthlyExpenses').value);
            if (monthlyExpenses) {
                document.getElementById('annualExpenses').value = monthlyExpenses * 12;
            }
        }

        function calculateRetirement() {
            const monthlyExpenses = parseFloat(document.getElementById('monthlyExpenses').value);
            const annualExpenses = parseFloat(document.getElementById('annualExpenses').value);
            const withdrawalPercentage = parseFloat(document.getElementById('withdrawalPercentage').value) / 100;

            if (!monthlyExpenses || !annualExpenses || !withdrawalPercentage) return;

            const portfolioValue = annualExpenses / withdrawalPercentage;

            document.getElementById('retirementPortfolioValue').textContent = '$' + portfolioValue.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('retirementMonthlyExpenses').textContent = '$' + monthlyExpenses.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('retirementAnnualExpenses').textContent = '$' + annualExpenses.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('retirementResults').style.display = 'block';

            // Create pie chart
            const ctx = document.getElementById('retirementChart').getContext('2d');
            if (window.retirementChartInstance) {
                window.retirementChartInstance.destroy();
            }
            window.retirementChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Annual Expenses', 'Portfolio Buffer'],
                    datasets: [{
                        data: [annualExpenses, portfolioValue - annualExpenses],
                        backgroundColor: ['#dc2626', '#10b981']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e2e8f0'
                            }
                        }
                    }
                }
            });
        }

        // Withdrawal Simulator Calculations
        function calculateWithdrawal() {
            const portfolioValue = parseFloat(document.getElementById('portfolioValue').value);
            const withdrawalRate = parseFloat(document.getElementById('withdrawalRate').value) / 100;
            const returnRate = parseFloat(document.getElementById('portfolioReturnRate').value) / 100;
            const years = parseFloat(document.getElementById('retirementYears').value);

            if (!portfolioValue || !withdrawalRate || !returnRate || !years) return;

            let balance = portfolioValue;
            const annualWithdrawal = portfolioValue * withdrawalRate;
            const yearlyData = [];

            for (let year = 1; year <= years; year++) {
                const startingBalance = balance;
                const withdrawal = annualWithdrawal;
                const returnEarned = startingBalance * returnRate;
                const endingBalance = startingBalance + returnEarned - withdrawal;
                
                yearlyData.push({
                    year: year,
                    startingBalance: startingBalance,
                    withdrawal: withdrawal,
                    returnEarned: returnEarned,
                    endingBalance: endingBalance
                });
                
                balance = endingBalance;
            }

            document.getElementById('finalPortfolioValue').textContent = '$' + balance.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('annualWithdrawalAmount').textContent = '$' + annualWithdrawal.toLocaleString(undefined, {maximumFractionDigits: 2});
            document.getElementById('withdrawalResults').style.display = 'block';

            // Create table
            const tableBody = document.getElementById('withdrawalTableBody');
            tableBody.innerHTML = '';
            yearlyData.forEach(data => {
                const row = tableBody.insertRow();
                row.insertCell(0).textContent = data.year;
                row.insertCell(1).textContent = '$' + data.startingBalance.toLocaleString(undefined, {maximumFractionDigits: 2});
                row.insertCell(2).textContent = '$' + data.withdrawal.toLocaleString(undefined, {maximumFractionDigits: 2});
                row.insertCell(3).textContent = '$' + data.returnEarned.toLocaleString(undefined, {maximumFractionDigits: 2});
                row.insertCell(4).textContent = '$' + data.endingBalance.toLocaleString(undefined, {maximumFractionDigits: 2});
            });
            document.getElementById('withdrawalTable').style.display = 'block';

            // Create line chart
            const ctx = document.getElementById('withdrawalChart').getContext('2d');
            if (window.withdrawalChartInstance) {
                window.withdrawalChartInstance.destroy();
            }
            window.withdrawalChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: yearlyData.map(data => 'Year ' + data.year),
                    datasets: [{
                        label: 'Portfolio Value',
                        data: yearlyData.map(data => data.endingBalance),
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#e2e8f0',
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#e2e8f0'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e2e8f0'
                            }
                        }
                    }
                }
            });
            document.getElementById('withdrawalGraphContainer').style.display = 'block';
        }

        // Initialize visitor count on page load
        window.onload = function() {
            updateVisitorCount();
        };
    </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"97b7ab9ece6c72da","serverTiming":{"name":{"cfExtPri":true,"cfEdge":true,"cfOrigin":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"version":"2025.8.0","token":"4edd5f8ec12a48cfa682ab8261b80a79"}' crossorigin="anonymous"></script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDvYLkX4PsMSEeW7zSjAw3iZ%2B10LKIcXI9N5Y74m0fWltzhRT323MLlJrwn7eTwKhGV54dTsintjtRbB4fxmij6BRWR%2FIgip11BrShFx7iD3IGdpCuBtXnE8O0bmSsxYOXhK4OdaGoS00Z2xL00fyBeNQbuAftpZLd7YhRLEA6lgUrNeplO59b9Yk8HAYpgzHLb1%2Fm7PBGTDzsuthoTPWTaVPRwF6cKoFU80aoTCtrxeKB19vOPlv9%2BPjJFOoe5EdeyMkiHvT98IuvxUdQdngRh%2BnqlPyKxyhJv%2BISHWfTFfh9KQmnMRhb32irjXo4d9EpguaEnBSdboAXEHuK4T3EuP1TJOEi4vKYsufXF3LwFKOWJglVe1PE4wc8r6v8%2BNYXNojPwMWV3stwpM%2BHMY5mTuPrFy3pfxzt1cb5XQPrv28nsufEZDYS%2FtyjnWQGo%2BJ5syN5t664j5Md6qsPax9e470dgBwwcrasKqo9WlvkFcu%2FcTKFfKYTEv2WMaxRqnW%2Ff7wuZ%2BEokRic5EpyF9480I%3D";
        window.__genspark_locale = "en-US";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDvYLkX4PsMSEeW7zSjAw3iZ+10LKIcXI9N5Y74m0fWltzhRT323MLlJrwn7eTwKhGV54dTsintjtRbB4fxmij6BRWR/Igip11BrShFx7iD3IGdpCuBtXnE8O0bmSsxYOXhK4OdaGoS00Z2xL00fyBeNQbuAftpZLd7YhRLEA6lgUrNeplO59b9Yk8HAYpgzHLb1/m7PBGTDzsuthoTPWTaVPRwF6cKoFU80aoTCtrxeKB19vOPlv9+PjJFOoe5EdeyMkiHvT98IuvxUdQdngRh+nqlPyKxyhJv+ISHWfTFfh9KQmnMRhb32irjXo4d9EpguaEnBSdboAXEHuK4T3EuP1TJOEi4vKYsufXF3LwFKOWJglVe1PE4wc8r6v8+NYXNojPwMWV3stwpM+HMY5mTuPrFy3pfxzt1cb5XQPrv28nsufEZDYS/tyjnWQGo+J5syN5t664j5Md6qsPax9e470dgBwwcrasKqo9WlvkFcu/cTKFfKYTEv2WMaxRqnW/f7wuZ+EokRic5EpyF9480I=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    